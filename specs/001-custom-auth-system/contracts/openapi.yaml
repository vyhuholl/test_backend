openapi: 3.0.3
info:
  title: Custom Authentication & Authorization API
  description: |
    Custom authentication and authorization system with JWT-based authentication and role-based access control (RBAC).
    
    ## Authentication
    
    Most endpoints require authentication via JWT token in the Authorization header:
    ```
    Authorization: Bearer <jwt_token>
    ```
    
    ## Rate Limiting
    
    - Login endpoint: 5 attempts per minute per IP
    - Registration endpoint: 10 attempts per hour per IP
    - Other endpoints: 100 requests per minute per user
    
    ## Response Format
    
    All responses follow a standardized JSON structure:
    
    **Success:**
    ```json
    {
      "data": { ... },
      "meta": {
        "timestamp": "2026-01-08T12:00:00Z",
        "total_count": 10
      }
    }
    ```
    
    **Error:**
    ```json
    {
      "error": {
        "code": "ERROR_CODE",
        "message": "Human-readable message",
        "details": [...]
      }
    }
    ```
  version: 1.0.0
  contact:
    name: API Support
    email: admin@example.com

servers:
  - url: http://localhost:8000/api
    description: Development server
  - url: https://api.example.com/api
    description: Production server

tags:
  - name: Authentication
    description: User registration, login, logout, and profile management
  - name: Admin - Roles
    description: Role management (admin only)
  - name: Admin - Elements
    description: Business element management (admin only)
  - name: Admin - Access Rules
    description: Access rule management (admin only)
  - name: Admin - Users
    description: User role assignment (admin only)
  - name: Resources
    description: Mock resource endpoints demonstrating RBAC

paths:
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register new user
      description: Create a new user account with email and password
      operationId: registerUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            example:
              first_name: Ivan
              last_name: Petrov
              middle_name: Sergeevich
              email: ivan.petrov@example.com
              password: SecurePass123
              password_confirmation: SecurePass123
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error:
                  code: VALIDATION_ERROR
                  message: Registration validation failed
                  details:
                    - field: email
                      message: Email already exists
                    - field: password
                      message: Password must be at least 8 characters with uppercase, lowercase, and number
        '429':
          $ref: '#/components/responses/RateLimitExceeded'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: User login
      description: Authenticate with email and password, receive JWT token
      operationId: loginUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
            example:
              email: ivan.petrov@example.com
              password: SecurePass123
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                invalidCredentials:
                  value:
                    error:
                      code: INVALID_CREDENTIALS
                      message: Invalid email or password
                      details: []
        '403':
          description: Account inactive
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error:
                  code: ACCOUNT_INACTIVE
                  message: Your account has been deactivated
                  details: []
        '429':
          $ref: '#/components/responses/RateLimitExceeded'

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: User logout
      description: Invalidate current JWT token (add to blacklist)
      operationId: logoutUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Successfully logged out
                  meta:
                    $ref: '#/components/schemas/MetaData'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/profile:
    get:
      tags:
        - Authentication
      summary: Get user profile
      description: Retrieve authenticated user's profile information
      operationId: getUserProfile
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    patch:
      tags:
        - Authentication
      summary: Update user profile
      description: Update authenticated user's profile information
      operationId: updateUserProfile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
            example:
              first_name: Ivan
              last_name: Ivanov
              email: ivan.ivanov@example.com
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                error:
                  code: VALIDATION_ERROR
                  message: Profile update validation failed
                  details:
                    - field: email
                      message: Email already exists
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    delete:
      tags:
        - Authentication
      summary: Delete user account
      description: Soft delete authenticated user's account (sets is_active=False)
      operationId: deleteUserAccount
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Account deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      message:
                        type: string
                        example: Account successfully deactivated
                  meta:
                    $ref: '#/components/schemas/MetaData'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /admin/roles:
    get:
      tags:
        - Admin - Roles
      summary: List all roles
      description: Retrieve all roles in the system (admin only)
      operationId: listRoles
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Roles retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    
    post:
      tags:
        - Admin - Roles
      summary: Create new role
      description: Create a new role (admin only)
      operationId: createRole
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRoleRequest'
            example:
              name: moderator
              description: Content moderator with review access
      responses:
        '201':
          description: Role created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/roles/{role_id}:
    get:
      tags:
        - Admin - Roles
      summary: Get role details
      description: Retrieve details of a specific role (admin only)
      operationId: getRole
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoleId'
      responses:
        '200':
          description: Role retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    
    patch:
      tags:
        - Admin - Roles
      summary: Update role
      description: Update role description (admin only)
      operationId: updateRole
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoleId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                  maxLength: 255
            example:
              description: Updated role description
      responses:
        '200':
          description: Role updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RoleResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags:
        - Admin - Roles
      summary: Delete role
      description: Delete a role (admin only, fails if assigned to users)
      operationId: deleteRole
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/RoleId'
      responses:
        '204':
          description: Role deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /admin/business-elements:
    get:
      tags:
        - Admin - Elements
      summary: List business elements
      description: Retrieve all business elements (admin only)
      operationId: listBusinessElements
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Elements retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BusinessElementListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/access-rules:
    get:
      tags:
        - Admin - Access Rules
      summary: List access rules
      description: Retrieve all access rules (admin only)
      operationId: listAccessRules
      security:
        - BearerAuth: []
      parameters:
        - name: role
          in: query
          description: Filter by role ID
          schema:
            type: string
            format: uuid
        - name: element
          in: query
          description: Filter by business element ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Access rules retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessRuleListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    
    post:
      tags:
        - Admin - Access Rules
      summary: Create access rule
      description: Create a new access rule for role-element combination (admin only)
      operationId: createAccessRule
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAccessRuleRequest'
      responses:
        '201':
          description: Access rule created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessRuleResponse'
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /admin/access-rules/{rule_id}:
    patch:
      tags:
        - Admin - Access Rules
      summary: Update access rule
      description: Update permission flags for an access rule (admin only)
      operationId: updateAccessRule
      security:
        - BearerAuth: []
      parameters:
        - name: rule_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAccessRuleRequest'
      responses:
        '200':
          description: Access rule updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessRuleResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /admin/users/{user_id}/roles:
    post:
      tags:
        - Admin - Users
      summary: Assign role to user
      description: Assign a role to a user (admin only)
      operationId: assignRoleToUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - role_id
              properties:
                role_id:
                  type: string
                  format: uuid
            example:
              role_id: 770e8400-e29b-41d4-a716-446655440000
      responses:
        '200':
          description: Role assigned successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserRolesResponse'
        '400':
          description: Validation error (role already assigned)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /admin/users/{user_id}/roles/{role_id}:
    delete:
      tags:
        - Admin - Users
      summary: Remove role from user
      description: Remove a role from a user (admin only)
      operationId: removeRoleFromUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
        - $ref: '#/components/parameters/RoleId'
      responses:
        '204':
          description: Role removed successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /resources/documents:
    get:
      tags:
        - Resources
      summary: List documents
      description: Retrieve all documents (requires documents:read_all permission)
      operationId: listDocuments
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
      responses:
        '200':
          description: Documents retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
    
    post:
      tags:
        - Resources
      summary: Create document
      description: Create a new document (requires documents:create permission)
      operationId: createDocument
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDocumentRequest'
      responses:
        '201':
          description: Document created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

  /resources/documents/{document_id}:
    get:
      tags:
        - Resources
      summary: Get document
      description: Retrieve a specific document (requires documents:read permission)
      operationId: getDocument
      security:
        - BearerAuth: []
      parameters:
        - name: document_id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Document retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /resources/projects:
    get:
      tags:
        - Resources
      summary: List projects
      description: Retrieve all projects (requires projects:read_all permission)
      operationId: listProjects
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Offset'
      responses:
        '200':
          description: Projects retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from /auth/login endpoint

  parameters:
    UserId:
      name: user_id
      in: path
      required: true
      description: User UUID
      schema:
        type: string
        format: uuid
    
    RoleId:
      name: role_id
      in: path
      required: true
      description: Role UUID
      schema:
        type: string
        format: uuid
    
    Limit:
      name: limit
      in: query
      description: Number of items to return (max 100)
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 50
    
    Offset:
      name: offset
      in: query
      description: Number of items to skip
      schema:
        type: integer
        minimum: 0
        default: 0

  schemas:
    RegisterRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
        - password
        - password_confirmation
      properties:
        first_name:
          type: string
          minLength: 1
          maxLength: 100
        last_name:
          type: string
          minLength: 1
          maxLength: 100
        middle_name:
          type: string
          maxLength: 100
          nullable: true
        email:
          type: string
          format: email
          maxLength: 255
        password:
          type: string
          minLength: 8
          format: password
          description: Must contain uppercase, lowercase, and number
        password_confirmation:
          type: string
          format: password
    
    RegisterResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/UserProfile'
        meta:
          $ref: '#/components/schemas/MetaData'
    
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
    
    LoginResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            token:
              type: string
              description: JWT access token
            token_type:
              type: string
              enum: [Bearer]
            expires_in:
              type: integer
              description: Token lifetime in seconds
              example: 86400
            user:
              $ref: '#/components/schemas/UserProfile'
        meta:
          $ref: '#/components/schemas/MetaData'
    
    UpdateProfileRequest:
      type: object
      properties:
        first_name:
          type: string
          minLength: 1
          maxLength: 100
        last_name:
          type: string
          minLength: 1
          maxLength: 100
        middle_name:
          type: string
          maxLength: 100
          nullable: true
        email:
          type: string
          format: email
          maxLength: 255
    
    ProfileResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/UserProfileDetailed'
        meta:
          $ref: '#/components/schemas/MetaData'
    
    CreateRoleRequest:
      type: object
      required:
        - name
        - description
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
          pattern: '^[a-z0-9_]+$'
        description:
          type: string
          minLength: 1
          maxLength: 255
    
    RoleResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Role'
        meta:
          $ref: '#/components/schemas/MetaData'
    
    RoleListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Role'
        meta:
          allOf:
            - $ref: '#/components/schemas/MetaData'
            - type: object
              properties:
                total_count:
                  type: integer
    
    CreateAccessRuleRequest:
      type: object
      required:
        - role_id
        - element_id
      properties:
        role_id:
          type: string
          format: uuid
        element_id:
          type: string
          format: uuid
        read_permission:
          type: boolean
          default: false
        read_all_permission:
          type: boolean
          default: false
        create_permission:
          type: boolean
          default: false
        update_permission:
          type: boolean
          default: false
        update_all_permission:
          type: boolean
          default: false
        delete_permission:
          type: boolean
          default: false
        delete_all_permission:
          type: boolean
          default: false
    
    UpdateAccessRuleRequest:
      type: object
      properties:
        read_permission:
          type: boolean
        read_all_permission:
          type: boolean
        create_permission:
          type: boolean
        update_permission:
          type: boolean
        update_all_permission:
          type: boolean
        delete_permission:
          type: boolean
        delete_all_permission:
          type: boolean
    
    AccessRuleResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/AccessRule'
        meta:
          $ref: '#/components/schemas/MetaData'
    
    AccessRuleListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/AccessRule'
        meta:
          allOf:
            - $ref: '#/components/schemas/MetaData'
            - type: object
              properties:
                total_count:
                  type: integer
    
    BusinessElementListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/BusinessElement'
        meta:
          allOf:
            - $ref: '#/components/schemas/MetaData'
            - type: object
              properties:
                total_count:
                  type: integer
    
    CreateDocumentRequest:
      type: object
      required:
        - title
        - content
      properties:
        title:
          type: string
          maxLength: 200
        content:
          type: string
    
    DocumentResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Document'
        meta:
          $ref: '#/components/schemas/MetaData'
    
    DocumentListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Document'
        meta:
          allOf:
            - $ref: '#/components/schemas/MetaData'
            - type: object
              properties:
                total_count:
                  type: integer
    
    ProjectListResponse:
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/Project'
        meta:
          allOf:
            - $ref: '#/components/schemas/MetaData'
            - type: object
              properties:
                total_count:
                  type: integer
    
    UserRolesResponse:
      type: object
      properties:
        data:
          type: object
          properties:
            user_id:
              type: string
              format: uuid
            roles:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  name:
                    type: string
        meta:
          $ref: '#/components/schemas/MetaData'
    
    UserProfile:
      type: object
      properties:
        id:
          type: string
          format: uuid
        first_name:
          type: string
        last_name:
          type: string
        middle_name:
          type: string
          nullable: true
        email:
          type: string
          format: email
        is_active:
          type: boolean
        roles:
          type: array
          items:
            type: string
          example: ["user"]
        created_at:
          type: string
          format: date-time
    
    UserProfileDetailed:
      allOf:
        - $ref: '#/components/schemas/UserProfile'
        - type: object
          properties:
            updated_at:
              type: string
              format: date-time
            last_login_at:
              type: string
              format: date-time
              nullable: true
    
    Role:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    
    BusinessElement:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        created_at:
          type: string
          format: date-time
    
    AccessRule:
      type: object
      properties:
        id:
          type: string
          format: uuid
        role:
          $ref: '#/components/schemas/Role'
        element:
          $ref: '#/components/schemas/BusinessElement'
        read_permission:
          type: boolean
        read_all_permission:
          type: boolean
        create_permission:
          type: boolean
        update_permission:
          type: boolean
        update_all_permission:
          type: boolean
        delete_permission:
          type: boolean
        delete_all_permission:
          type: boolean
        created_at:
          type: string
          format: date-time
    
    Document:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        author:
          type: string
        created_at:
          type: string
          format: date-time
    
    Project:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        status:
          type: string
        created_at:
          type: string
          format: date-time
    
    MetaData:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
    
    ErrorResponse:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              enum:
                - VALIDATION_ERROR
                - AUTHENTICATION_REQUIRED
                - INVALID_CREDENTIALS
                - ACCOUNT_INACTIVE
                - INSUFFICIENT_PERMISSIONS
                - NOT_FOUND
                - RATE_LIMIT_EXCEEDED
                - INTERNAL_ERROR
            message:
              type: string
            details:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                  message:
                    type: string

  responses:
    Unauthorized:
      description: Authentication required or invalid token
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: AUTHENTICATION_REQUIRED
              message: Valid authentication token required
              details: []
    
    Forbidden:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: INSUFFICIENT_PERMISSIONS
              message: You do not have permission to access this resource
              details: []
    
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: NOT_FOUND
              message: Resource not found
              details: []
    
    RateLimitExceeded:
      description: Rate limit exceeded
      headers:
        Retry-After:
          schema:
            type: integer
          description: Seconds to wait before retrying
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error:
              code: RATE_LIMIT_EXCEEDED
              message: Too many requests. Please try again later.
              details: []
